include ../includes/header.jade

-function millisecondsToStr (milliseconds) {
-    // TIP: to find current time in milliseconds, use:
-    // var  current_time_milliseconds = new Date().getTime();
-
-    function numberEnding (number) {
-        return (number > 1) ? 's' : '';
-    }
-
-    var temp = Math.floor(milliseconds / 1000);
-    var years = Math.floor(temp / 31536000);
-    if (years) {
-        return years + ' year' + numberEnding(years) + " ago";
-    }
-    // TODO: Months! Maybe weeks? 
-    let days = Math.floor((temp %= 31536000) / 86400);
-    if (days) {
-        return days + ' day' + numberEnding(days) + " ago";
-    }
-    let hours = Math.floor((temp %= 86400) / 3600);
-    if (hours) {
-        return hours + ' hour' + numberEnding(hours) + " ago";
-    }
-    let minutes = Math.floor((temp %= 3600) / 60);
-    if (minutes) {
-        return minutes + ' minute' + numberEnding(minutes) + " ago";
-    }
-    let seconds = temp % 60;
-    if (seconds) {
-       return "just now"
// -        return seconds + ' second' + numberEnding(seconds);
-    }
-    return 'just now'; //'just now' //or other string you like;
-}

mixin cluck(cluckObj)
    .cluck
        .user-info
            if cluckObj.username !== "&"
                img.icon(src="/images/default_icon.png", alt="user")
                h2= cluckObj.username
            else
                img.icon(src="/images/anonymous_icon.png", alt="user")
                h2 Anonymous
            p.timestamp #{millisecondsToStr((Date.now() - cluckObj.created_at))}
        .content
            p!= cluckObj.content
            if cluckObj.image_url
                .image
                    img(src=cluckObj.image_url, alt="image not found")



+custom-header("Cluckr | Clucks", true, "clucks.css")

article
    .tags
        h1 What's trending?
        each tagObj in tags
            .list-tag
                p.tag= tagObj.tag
                p.count= `tagged ${tagObj.count} times`

    .clucks 
        each cluck in clucks
            +cluck(cluck)

    .ghost